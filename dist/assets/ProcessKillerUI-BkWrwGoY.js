import{r as a,j as e,i as o,b as u}from"./index-CJSl0HS4.js";const k=({initialTarget:i})=>{const[t,d]=a.useState([]),[h,f]=a.useState(!0),[r,m]=a.useState(null),x=async()=>{try{const l=(await o("list_processes")).filter(c=>c.name.toLowerCase().includes(i.toLowerCase())).slice(0,5);d(l)}catch(s){console.error(s)}finally{f(!1)}};a.useEffect(()=>{x()},[i]);const p=async(s,l,c=!1)=>{m(s);try{c?(await o("kill_process_tree",{pid:s}),u.getState().speak(`Terminated ${l} and its child processes`)):(await o("kill_process_by_pid",{pid:s}),u.getState().speak(`Terminated ${l}`)),d(n=>n.filter(g=>g.pid!==s))}catch(n){console.error(n)}finally{m(null)}};return h?e.jsx("div",{className:"process-killer-loading",children:"Searching for processes..."}):t.length===0?e.jsxs("div",{className:"process-killer-empty",children:['No running processes matching "',i,'"']}):e.jsxs("div",{className:"process-killer-ui",children:[e.jsx("div",{className:"process-list",children:t.map(s=>e.jsxs("div",{className:"process-item",children:[e.jsxs("div",{className:"process-info",children:[e.jsx("span",{className:"process-name",children:s.name}),e.jsxs("span",{className:"process-stats",children:[s.cpu_usage.toFixed(1),"% CPU â€¢ ",(s.memory/1024/1024).toFixed(0),"MB (PID: ",s.pid,")"]})]}),e.jsxs("div",{className:"process-actions",children:[e.jsx("button",{className:`kill-action-btn ${r===s.pid?"killing":""}`,onClick:l=>{l.stopPropagation(),p(s.pid,s.name,!1)},disabled:r!==null,children:r===s.pid?"...":"Kill"}),e.jsx("button",{className:`kill-tree-btn ${r===s.pid?"killing":""}`,onClick:l=>{l.stopPropagation(),p(s.pid,s.name,!0)},disabled:r!==null,title:"Kill process and all descendants",children:"Tree"})]})]},s.pid))}),e.jsxs("div",{className:"process-footer",children:["Found ",t.length," matching processes"]})]})};export{k as ProcessKillerUI};
