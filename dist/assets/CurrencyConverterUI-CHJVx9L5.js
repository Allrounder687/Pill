import{r as c,j as r,c as f}from"./index-CJSl0HS4.js";const v=({initialResult:a,onQueryChange:p})=>{const[s,m]=c.useState(a.amount),[e,u]=c.useState(a),[i,l]=c.useState(!1);c.useEffect(()=>{const o=setTimeout(async()=>{if(s===e.amount&&e.from===a.from)return;const n=await f.convert(`${s} ${e.from} to ${e.to}`);n&&u(n)},300);return()=>clearTimeout(o)},[s,e.from,e.to]);const d=async()=>{try{await navigator.clipboard.writeText(e.result),l(!0),setTimeout(()=>l(!1),2e3)}catch(t){console.error("Failed to copy text: ",t)}},y=()=>{const t=e.to,o=e.from,n=`${s} ${t} to ${o}`;p(n),u(x=>({...x,from:t,to:o,result:"..."}))};return r.jsxs("div",{className:"currency-mini-app",children:[r.jsxs("div",{className:"currency-row",children:[r.jsxs("div",{className:"currency-input-group",children:[r.jsx("input",{type:"number",value:s,onChange:t=>m(t.target.value),className:"currency-amount-input",onClick:t=>t.stopPropagation(),onKeyDown:t=>t.stopPropagation(),autoFocus:!0}),r.jsx("span",{className:"currency-code",children:e.from})]}),r.jsx("div",{className:"currency-separator",children:r.jsx("button",{className:"swap-btn",onClick:t=>{t.stopPropagation(),y()},title:"Swap currencies",children:"â‡„"})}),r.jsxs("div",{className:"currency-input-group result",children:[r.jsx("span",{className:"currency-value",children:e.result}),r.jsx("span",{className:"currency-code",children:e.to})]}),r.jsx("button",{className:`copy-btn ${i?"copied":""}`,onClick:t=>{t.stopPropagation(),d()},title:"Copy result",children:i?"âœ“":"ðŸ“‹"})]}),r.jsxs("div",{className:"currency-footer",children:["Rate: 1 ",e.from," = ",e.rate," ",e.to]})]})};export{v as CurrencyConverterUI};
